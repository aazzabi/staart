# Migration `20200902181624`

This migration has been generated by Anand Chowdhary at 9/2/2020, 11:46:24 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `staart`.`accessTokens` DROP COLUMN `expiresAt`,
ADD COLUMN `ipRestrictions` json  ,
ADD COLUMN `referrerRestrictions` json  

ALTER TABLE `staart`.`apiKeys` DROP COLUMN `expiresAt`
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200804141140..20200902181624
--- datamodel.dml
+++ datamodel.dml
@@ -1,11 +1,12 @@
 generator client {
-  provider = "prisma-client-js"
+  provider        = "prisma-client-js"
+  previewFeatures = ["middlewares"]
 }
 datasource mysql {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 enum Gender {
   MALE
@@ -108,33 +109,33 @@
   users users[] @relation("userPrefersEmail")
 }
 model accessTokens {
-  createdAt   DateTime @default(now())
-  description String?
-  expiresAt   DateTime
-  id          Int      @default(autoincrement()) @id
-  accessToken String
-  name        String?
-  scopes      Json?
-  updatedAt   DateTime @updatedAt
-  user        users    @relation("userAccessTokens", fields: [userId], references: [id])
-  userId      Int
+  createdAt            DateTime @default(now())
+  description          String?
+  id                   Int      @default(autoincrement()) @id
+  accessToken          String
+  name                 String?
+  scopes               Json?
+  updatedAt            DateTime @updatedAt
+  user                 users    @relation("userAccessTokens", fields: [userId], references: [id])
+  userId               Int
+  ipRestrictions       Json?
+  referrerRestrictions Json?
   @@index([userId], name: "userId")
 }
 model apiKeys {
   createdAt            DateTime @default(now())
   description          String?
-  expiresAt            DateTime
   id                   Int      @default(autoincrement()) @id
   ipRestrictions       Json?
   apiKey               String
   name                 String?
   group                groups   @relation("groupApiKeys", fields: [groupId], references: [id])
   groupId              Int
-  referrerRestrictions String?
+  referrerRestrictions Json?
   scopes               Json?
   updatedAt            DateTime @updatedAt
 }
```


